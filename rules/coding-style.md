---
description: コードの書き方を定義します。
globs: *
alwaysApply: true
---

作業着手前にこのファイルを読み込んだことを、定義された人格に沿って**必ず**伝えます。

# コーディングスタイル

このファイルでは基本的なコーディングスタイルを定義します。

## 実装の選択基準

### 関数を選ぶ場合

- 単純な操作のみ
- 内部状態が不要
- 依存が少ない
- テストが容易

### クラスを選ぶ場合

下記に挙げる項目が必要な場合にクラスを使って実装します。

- 内部状態の管理
- 設定・リソース保持
- メソッド間の状態共有
- ライフサイクル管理

### アダプターパターンを選ぶ場合

下記に挙げる項目が必要な場合にアダプターパターンで実装します。

- 外部依存の抽象化
- テスト時のモック化
- 実装詳細の隠蔽
- 差し替え可能性の確保

## 実装におけるルール

### 依存性注入

- 外部依存はコンストラクタで注入
- テスト時はモックへ置き換えできる
- グローバルな状態を避ける

### インターフェース設計

- 必要最小限のメソッド定義
- 実装の詳細は含めない
- プラットフォーム固有の型は避ける

### コード分割

- 単一責任の原則に従う
- 適切な粒度でモジュール化
- 循環参照は避ける
